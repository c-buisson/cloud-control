#!/usr/bin/ruby

guest=""
eval File.read("<%= data_folder %>/ENV")

if ARGV[0].nil?
  puts "This script will download and place any ISO or Cloud Image to the correct location"
  puts "For Ubuntu ISO, go to: http://mirror.anl.gov/pub/ubuntu-iso/DVDs/ubuntu/"
  puts "For Ubuntu Cloud Image, go to: https://cloud-images.ubuntu.com/"
  puts "\nUsage: get_images.rb URL"
  exit 1
end

path=ARGV[0]
filename = ARGV[0].split(/\?/).first.split(/\//).last

if path.end_with? "iso"
  puts "\nDownloading #{filename}...\n"
  system("wget #{path} -P #{ISO}") or raise "Error while downloading that ISO. Wrong URL maybe?"
elsif path.end_with? "img"
  puts "\nDownloading #{filename}...\n"
  system("wget #{path} -P #{CLOUD_IMAGES}") or raise "Error while downloading that Cloud Image. Wrong URL maybe?"
else
  puts "\nDoesn't support this type of source"
  puts "Must be ISO or Cloud Image\n"
exit 1
end

puts "Download completed!\n"
